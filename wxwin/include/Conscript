# -*- CPerl -*-
#
# $Id$
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# This file is a part of the Scooter project. 
#
# Copyright (c) 2004. Dimitry Kloper <dimka@cs.technion.ac.il> . 
# Technion, Israel Institute of Technology. Computer Science Department.
#
# Conscript -- conscript file for wxwin/include
#

use File::Basename;
use File::Find;
use Cons::Template;
use Cons::Common;

Import qw(BLIB toolset options platform);

my $ruleset  = $toolset->env();

die if( !defined( $ruleset ) );

our $buildenv   = new cons( %{$ruleset} );


my @platform_files;
my @top_files = qw(  
accel.h
app.h
arrimpl.cpp
artprov.h
bitmap.h
bmpbuttn.h
brush.h
buffer.h
build.h
busyinfo.h
button.h
calctrl.h
caret.h
checkbox.h
checklst.h
chkconf.h
choicdlg.h
choice.h
clipbrd.h
clntdata.h
cmdline.h
cmdproc.h
cmndata.h
colordlg.h
colour.h
combobox.h
confbase.h
config.h
containr.h
control.h
cshelp.h
ctrlsub.h
cursor.h
dataobj.h
date.h
datetime.h
datetime.inl
datstrm.h
db.h
dbgrid.h
dbkeyg.h
dbtable.h
dc.h
dcbuffer.h
dcclient.h
dcmemory.h
dcprint.h
dcps.h
dcscreen.h
dde.h
debug.h
defs.h
dialog.h
dialup.h
dir.h
dirctrl.h
dirdlg.h
display.h
dnd.h
docmdi.h
docview.h
dragimag.h
dynarray.h
dynlib.h
dynload.h
effects.h
encconv.h
event.h
evtloop.h
expr.h
fdrepdlg.h
features.h
ffile.h
file.h
fileconf.h
filedlg.h
filefn.h
filename.h
filesys.h
font.h
fontdlg.h
fontenc.h
fontenum.h
fontmap.h
fontutil.h
frame.h
fs_inet.h
fs_mem.h
fs_zip.h
gauge.h
gdicmn.h
gdiobj.h
geometry.h
gifdecod.h
glcanvas.h
grid.h
gsocket.h
hash.h
hashmap.h
help.h
helpbase.h
helphtml.h
helpwin.h
icon.h
iconbndl.h
imagbmp.h
image.h
imaggif.h
imagiff.h
imagjpeg.h
imaglist.h
imagpcx.h
imagpng.h
imagpnm.h
imagtiff.h
imagxpm.h
intl.h
ioswrap.h
ipc.h
ipcbase.h
isql.h
isqlext.h
joystick.h
layout.h
laywin.h
list.h
listbase.h
listbox.h
listctrl.h
listimpl.cpp
log.h
longlong.h
matrix.h
mdi.h
memconf.h
memory.h
memtext.h
menu.h
menuitem.h
metafile.h
mimetype.h
minifram.h
module.h
msgdlg.h
msgout.h
mstream.h
notebook.h
object.h
odbc.h
ownerdrw.h
palette.h
panel.h
paper.h
pen.h
platform.h
popupwin.h
print.h
printdlg.h
prntbase.h
process.h
progdlg.h
prop.h
propform.h
proplist.h
ptr_scpd.h
quantize.h
radiobox.h
radiobut.h
regex.h
region.h
resource.h
sashwin.h
sckaddr.h
sckipc.h
sckstrm.h
scrolbar.h
scrolwin.h
settings.h
setup_redirect.h
sizer.h
slider.h
snglinst.h
socket.h
spawnbrowser.h
spinbutt.h
spinctrl.h
splash.h
splitter.h
stack.h
statbmp.h
statbox.h
statline.h
stattext.h
statusbr.h
strconv.h
stream.h
string.h
sysopt.h
tab.h
tabctrl.h
taskbar.h
tbarbase.h
tbarsmpl.h
textbuf.h
textctrl.h
textdlg.h
textfile.h
tglbtn.h
thread.h
thrimpl.cpp
time.h
timer.h
tipdlg.h
tipwin.h
tokenzr.h
toolbar.h
tooltip.h
toplevel.h
treebase.h
treectrl.h
treelay.h
txtstrm.h
types.h
url.h
utils.h
valgen.h
validate.h
valtext.h
variant.h
vector.h
version.h
vms_x_fix.h
volume.h
wave.h
wfstream.h
window.h
wizard.h
wx.h
wx_cw.h
wx_cw_cm.h
wx_cw_d.h
wx_cwc.h
wx_cwc_d.h
wx_cwu_d.h
wxchar.h
wxexpr.h
wxhtml.h
wxprec.h
wxshlb_cw.h
wxshlb_cw_d.h
wxshlb_cwc.h
wxshlb_cwc_d.h
wxshlba_cw.h
wxshlba_cw_d.h
wxshlba_cwc.h
wxshlba_cwc_d.h
xpmdecod.h
xpmhand.h
zipstrm.h
zstream.h
html/forcelnk.h
html/helpctrl.h
html/helpdata.h
html/helpfrm.h
html/htmlcell.h
html/htmldefs.h
html/htmlfilt.h
html/htmlpars.h
html/htmlproc.h
html/htmltag.h
html/htmlwin.h
html/htmprint.h
html/m_templ.h
html/winpars.h
protocol/file.h
protocol/ftp.h
protocol/http.h
protocol/protocol.h
generic/accel.h
generic/calctrl.h
generic/caret.h
generic/choicdgg.h
generic/colrdlgg.h
generic/dcpsg.h
generic/dirctrlg.h
generic/dirdlgg.h
generic/dragimgg.h
generic/fdrepdlg.h
generic/filedlgg.h
generic/fontdlgg.h
generic/grid.h
generic/gridctrl.h
generic/gridg.h
generic/gridsel.h
generic/helpext.h
generic/helphtml.h
generic/imaglist.h
generic/laywin.h
generic/listctrl.h
generic/mdig.h
generic/msgdlgg.h
generic/notebook.h
generic/paletteg.h
generic/panelg.h
generic/printps.h
generic/prntdlgg.h
generic/progdlgg.h
generic/sashwin.h
generic/scrolwin.h
generic/spinctlg.h
generic/splash.h
generic/splitter.h
generic/statline.h
generic/statusbr.h
generic/tabg.h
generic/textdlgg.h
generic/timer.h
generic/treectlg.h
generic/treelay.h
generic/wizard.h
);

my $platform_files = {
    'msw' => [ qw(
accel.h
app.h
bitmap.h
blank.cur
bmpbuttn.h
brush.h
bullseye.cur
button.h
caret.h
cdrom.ico
checkbox.h
checklst.h
child.ico
choice.h
clipbrd.h
clock.cur
colordlg.h
colour.h
colours.bmp
combobox.h
computer.ico
control.h
csquery.bmp
curico.h
curicop.h
cursor.h
dc.h
dcclient.h
dcmemory.h
dcprint.h
dcscreen.h
dde.h
dialog.h
dib.h
dibutils.h
dirdlg.h
disable.bmp
display.h
dragimag.h
drive.ico
enhmeta.h
error.ico
fdrepdlg.h
file1.ico
filedlg.h
floppy.ico
folder1.ico
folder2.ico
font.h
fontdlg.h
fontenum.h
frame.h
gauge95.h
gaugemsw.h
gccpriv.h
gdiimage.h
gdiobj.h
glcanvas.h
gsockmsw.h
hand.cur
heart.cur
helpbest.h
helpchm.h
helpwin.h
icon.h
imaglist.h
info.ico
iniconf.h
joystick.h
listbox.h
listctrl.h
magnif1.cur
mdi.h
mdi.ico
menu.h
menuitem.h
metafile.h
microwin.h
mimetype.h
minifram.h
missing.h
msgdlg.h
mslu.h
msvcrt.h
noentry.cur
notebook.h
palette.h
pbrush.cur
pen.h
pencil.cur
pntleft.cur
pntright.cur
popupwin.h
printdlg.h
printwin.h
private.h
query.cur
question.ico
radiobox.h
radiobut.h
regconf.h
region.h
registry.h
removble.ico
rightarr.cur
roller.cur
scrolbar.h
size.cur
slider95.h
slidrmsw.h
spinbutt.h
spinctrl.h
statbmp.h
statbox.h
statbr95.h
statline.h
stattext.h
std.ico
tabctrl.h
taskbar.h
tbar95.h
tbarmsw.h
textctrl.h
tglbtn.h
timer.h
tooltip.h
toplevel.h
treectrl.h
uxtheme.h
warning.ico
watch1.cur
wave.h
window.h
winundef.h
wx.rc
ctl3d/ctl3d.h
gnuwin32/extra.h
gnuwin32/sql.h
gnuwin32/sqlext.h
gnuwin32/sqltypes.h
gnuwin32/winresrc.h
gnuwin32/gl/gl.h
gnuwin32/gl/glaux.h
gnuwin32/gl/glu.h
ole/automtn.h
ole/dataform.h
ole/dataobj.h
ole/dataobj2.h
ole/dropsrc.h
ole/droptgt.h
ole/oleutils.h
ole/uuid.h
) ],
};

our $params = { 'have_zlib'    => 0 + defined($ruleset->{'ZLIB_ROOT'}),
		'have_libpng'  => 0 + defined($ruleset->{'LIBPNG_ROOT'}),
		'have_libjpeg' => 0 + defined($ruleset->{'JPEG_ROOT'}),
		'have_libtiff' => 0 + defined($ruleset->{'TIFF_ROOT'}) };

Command $buildenv "$BLIB/include/wx/setup.h", "wx/$platform/setup.h.in", 
  q([perl] Cons::Template->apply( '%>', '%<', $params ); );

for my $file ( map( "wx/$_", @top_files ), 
	       map( "wx/$platform/$_", @{$platform_files->{$platform}} ) ) {
    Install $buildenv "$BLIB/include/" . dirname($file), $file;    
    
}


#
# Conscript -- end of file
#

